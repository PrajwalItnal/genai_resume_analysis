{% extends "base.html" %}

{% block title %} Resume Analysis {% endblock %}

{% block head %}
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #89f7fe, #66a6ff);
    display: flex;
    align-items: center;
    justify-content: center;
}

.report-box {
    background: #f5f1f1cc;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0px 12px 50px rgba(0,0,0,0.2);
    max-width: 900px;
    width: 95%;
    text-align: center;
    animation: fadeIn 1s ease forwards;
    opacity: 0;
}

@keyframes fadeIn {
    to { opacity: 1; }
}

h1, h2 {
    color: #333;
}

h1 {
    margin-bottom: 25px;
    font-size: 28px;
    font-weight: 700;
}

h2 {
    font-size: 20px;
    margin-top: 25px;
    margin-bottom: 15px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
}

.skill-card {
    background-color: #fff;
    border-radius: 15px;
    padding: 15px;
    margin-bottom: 10px;
    box-shadow: 0px 5px 15px rgba(0,0,0,0.1);
    text-align: left;
}

.badge {
    display: inline-block;
    padding: 5px 12px;
    margin: 3px 5px 3px 0;
    background-color: #66a6ff;
    color: white;
    border-radius: 12px;
    font-size: 14px;
}

.missing-skills .badge {
    background-color: #ff6b6b;
}

.strengths .badge {
    background-color: #4caf50;
}

footer {
    margin-top: 30px;
    text-align: center;
    font-size: 14px;
    color: #777;
    border-top: 1px solid #ccc;
    padding-top: 10px;
}

.speedometer {
    position: relative;
    width: 250px;
    height: 125px;
    margin: 20px auto;
}

.needle {
    width: 2px;
    height: 100px;
    background: red;
    position: absolute;
    bottom: 0;
    left: 50%;
    transform-origin: bottom center;
    transform: rotate(0deg);
    transition: transform 1s ease-out;
}

.speedometer-bg {
    stroke: #ddd;
    fill: none;
    stroke-width: 15;
}

.speedometer-arc {
    stroke: #66a6ff;
    fill: none;
    stroke-width: 15;
    stroke-linecap: round;
}
</style>
{% endblock %}

{% block content %}
<div class="report-box">
    <h1>Hi, {{report.name}}</h1>

    <h2>Overall Score</h2>
    <div class="speedometer">
        <svg viewBox="0 0 200 100">
            <!-- Background Arc -->
            <path class="speedometer-bg" d="M 10 100 A 90 90 0 0 1 190 100" />
            <!-- Foreground Arc -->
            <path class="speedometer-arc" d="M 10 100 A 90 90 0 0 1 190 100"
                  stroke-dasharray="{{report.points * 2.83}}, 283" />
        </svg>
        <div class="needle" [style.transform]="'rotate(' + (report.points * 1.8 - 90) + 'deg)'"></div>
        <div style="position:absolute; width:100%; bottom:0; text-align:center; font-weight:bold; color:#333;">{{report.points}}%</div>
    </div>

    <h2>Resume Summary</h2>
    <div class="skill-card">
         {% if report.experience %}
            {% for exp in report.experience %}
               <p><strong>{{exp.role}}</strong> at {{exp.company}} ({{exp.duration}})</p>
               <p>{{exp.work_done}}</p>
            {% endfor %}
         {% else %}
            <p><strong>Experience:</strong> 0</p>
         {% endif %}

        <p><strong>Education:</strong> {{report.education}}</p>
        <p><strong>Resume Highlights:</strong> {{report.summary}}</p>
    </div>

    <h2>Key Skills Matched</h2>
    <div class="strengths">
        {% if report.key_skills %}
            {% for skill in report.key_skills %}
                <span class="badge">{{skill}}</span>
            {% endfor %}
        {% else %}
            <span class="badge">None</span>
        {% endif %}
    </div>

    <h2>Missing Skills</h2>
    <div class="missing-skills">
        {% if report.missing_skills %}
            {% for skill in report.missing_skills %}
                <span class="badge">{{skill}}</span>
            {% endfor %}
        {% else %}
            <span class="badge">None</span>
        {% endif %}
    </div>

    <h2>Drawbacks</h2>
    <p>{{report.drawbacks}}</p>

    <h2>Recommendations / Improvements</h2>
    <p>{{report.improvements}}</p>

    <footer>
        <p>Generated by Gemini flash-2.5</p>
    </footer>
</div>
{% endblock %}
